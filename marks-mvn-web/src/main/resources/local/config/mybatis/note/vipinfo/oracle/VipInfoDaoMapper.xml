<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.marks.module.note.vipinfo.dao.VipInfoDao">

	<select id="findById" resultType="com.marks.module.note.vipinfo.pojo.VipInfo">
		SELECT * FROM
		TB_VIP_INFO vipinfo where vipinfo.USERID = #{userid}
	</select>

	<select id="findVipDetailInfoById" resultType="com.marks.module.note.vipinfo.pojo.VipInfo">
		SELECT
		vipinfo.*,su.skin FROM
		tb_sys_user su left join TB_VIP_INFO vipinfo on
		vipinfo.userid=su.userid where su.USERID = #{userid}
	</select>

	<insert id="save" parameterType="com.marks.module.note.vipinfo.pojo.VipInfo">
		INSERT INTO TB_VIP_INFO vipinfo
		(
		vipinfo.USERID,
		vipinfo.REALNAME,
		vipinfo.GENDER,
		vipinfo.BIRTHDATE,
		vipinfo.EMAIL,
		vipinfo.SIGNATURE,
		vipinfo.CREATETIME,
		vipinfo.UPDATETIME
		)
		VALUES(
		#{userid:VARCHAR},
		#{realname:VARCHAR},
		#{gender:VARCHAR},
		#{birthdate:VARCHAR},
		#{email:VARCHAR},
		#{signature:VARCHAR},
		sysdate,
		sysdate

		)
	</insert>

	<update id="update" parameterType="com.marks.module.note.vipinfo.pojo.VipInfo">
		UPDATE TB_VIP_INFO vipinfo
		SET
		vipinfo.REALNAME = #{realname:VARCHAR},
		vipinfo.GENDER =
		#{gender:NUMERIC},
		vipinfo.BIRTHDATE = #{birthdate:VARCHAR},
		vipinfo.EMAIL = #{email:VARCHAR},
		vipinfo.SIGNATURE =
		#{signature:VARCHAR},
		vipinfo.UPDATETIME = sysdate
		WHERE
		vipinfo.USERID =
		#{userid}
	</update>

	<delete id="delete" parameterType="String">
		DELETE FROM TB_VIP_INFO
		vipinfo WHERE vipinfo.USERID=#{userid}
	</delete>

	<select id="findAll" resultType="com.marks.module.note.vipinfo.pojo.VipInfo">
		SELECT * FROM TB_VIP_INFO
	</select>

	<delete id="deleteBatch" parameterType="java.util.List">
		DELETE FROM TB_VIP_INFO WHERE USERID in
		<foreach collection="list" item="ids" index="index" open="("
			separator="," close=")">
			#{ids}
		</foreach>
	</delete>

	<select id="list" resultType="com.marks.module.note.vipinfo.pojo.VipInfo"
		parameterType="java.util.Map">
		SELECT *
		FROM TB_VIP_INFO vipinfo
		WHERE 1=1
		<if test="keyword!=null and keyword!=''">
			and ( vipinfo.USERID LIKE
			CONCAT(CONCAT('%',#{keyword:VARCHAR}),'%')
			or vipinfo.REALNAME LIKE
			CONCAT(CONCAT('%',#{keyword:VARCHAR}),'%')
			or vipinfo.GENDER LIKE
			CONCAT(CONCAT('%',#{keyword:VARCHAR}),'%')
			or vipinfo.BIRTHDATE LIKE
			CONCAT(CONCAT('%',#{keyword:VARCHAR}),'%')
			or vipinfo.EMAIL LIKE
			CONCAT(CONCAT('%',#{keyword:VARCHAR}),'%')
			or vipinfo.SIGNATURE LIKE
			CONCAT(CONCAT('%',#{keyword:VARCHAR}),'%')
			)
		</if>



	</select>



</mapper>